<!DOCTYPE html>
<html lang="fr" style="overflow-x: hidden;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memento Mori</title>
    <meta name="description" content="Memento Mori - Visualisez votre vie en années, mois et jours. Un rappel stoïcien pour vivre chaque instant pleinement.">
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Memento Mori">
    <meta property="og:description" content="Visualisez votre vie en années, mois et jours. Un rappel stoïcien pour vivre chaque instant pleinement.">
    <meta property="og:image" content="https://fmatsos.github.io/tools/memento-mori/memento-mori-og.png">
    <meta property="og:url" content="https://fmatsos.github.com/tools/memento-mori/">
    <meta property="og:site_name" content="Memento Mori">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Memento Mori">
    <meta name="twitter:description" content="Visualisez votre vie en années, mois et jours. Un rappel stoïcien pour vivre chaque instant pleinement.">
    <meta name="twitter:image" content="https://fmatsos.github.io/tools/memento-mori/memento-mori-og.png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Montserrat:wght@200;300;400&display=swap');

        :root {
            --bg-color: #fdfcf5;
            --text-color: #5d4037;
            --accent-color: #c19a6b;
            --accent-dim: #a1887f;
            --dot-empty: #e6e0d4;
            --dot-filled: #8d6e63;
            --dot-past: #8d6e63;
            --glass-bg: rgba(255, 255, 255, 0.4);
            --glass-border: rgba(93, 64, 55, 0.1);
            --progress-bg: #e0e0e0;
            --progress-fill: #8d6e63;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Montserrat', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
            max-width: 100vw;
            padding-bottom: 60px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }

        header {
            text-align: center;
            padding: 2rem 1rem 1rem;
            width: 100%;
            max-width: 800px;
            z-index: 10;
            margin-bottom: 1rem;
        }

        h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3.5rem;
            font-weight: 400;
            margin: 0 0 0.5rem 0;
            letter-spacing: 2px;
            color: var(--text-color);
            text-transform: uppercase;
        }

        .quote-container {
            font-family: 'Cormorant Garamond', serif;
            font-style: italic;
            font-size: 1.2rem;
            color: var(--accent-dim);
            margin-bottom: 2rem;
            min-height: 3em;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 1rem;
        }

        .controls {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-top: 1.5rem;
            flex-wrap: wrap;
            background: var(--glass-bg);
            padding: 1rem 2rem;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(93, 64, 55, 0.05);
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 0.3rem;
            color: var(--accent-dim);
            font-weight: 600;
        }

        input {
            background: transparent;
            border: none;
            border-bottom: 1px solid var(--accent-dim);
            color: var(--text-color);
            padding: 0.4rem 0.5rem;
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            text-align: center;
            transition: border-color 0.3s;
            width: 120px;
        }

        input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .breadcrumb {
            margin: 1.5rem 0;
            font-size: 0.9rem;
            letter-spacing: 1px;
            color: var(--accent-dim);
        }

        .breadcrumb span {
            cursor: pointer;
            transition: color 0.3s;
        }

        .breadcrumb span.active {
            color: var(--text-color);
            cursor: default;
            font-weight: 600;
            border-bottom: 1px solid var(--accent-color);
        }

        .breadcrumb span:not(.active):hover {
            color: var(--accent-color);
        }

        .stats {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        #grid-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 6px;
            max-width: 1200px;
            padding: 1rem;
            margin-bottom: 4rem;
        }

        .dot {
            background-color: var(--dot-empty);
            border-radius: 2px;
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
        }

        .dot.filled {
            background-color: var(--dot-filled);
        }

        @keyframes shimmerGlow {
            0%   { box-shadow: 0 0 6px var(--accent-color), 0 0 12px rgba(193, 154, 107, 0.3); }
            50%  { box-shadow: 0 0 18px var(--accent-color), 0 0 36px rgba(193, 154, 107, 0.5); }
            100% { box-shadow: 0 0 6px var(--accent-color), 0 0 12px rgba(193, 154, 107, 0.3); }
        }

        .dot.current {
            background-color: var(--accent-color);
            box-shadow: 0 0 10px var(--accent-color);
            z-index: 2;
            transform: scale(1.2);
            animation: shimmerGlow 2s ease-in-out infinite;
        }

        .dot:hover {
            transform: scale(1.4);
            z-index: 3;
            background-color: var(--text-color);
        }

        .view-life .dot {
            width: 16px;
            height: 16px;
            margin: 4px;
            border-radius: 3px;
        }

        .view-months .dot {
            width: 10px;
            height: 10px;
            margin: 3px;
            border-radius: 50%;
        }

        .view-days .dot {
            width: 4px;
            height: 4px;
            margin: 1px;
            border-radius: 50%;
        }

        .life-progress-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background-color: var(--dot-empty);
            z-index: 100;
        }

        .life-progress-bar {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 1s ease-in-out;
        }

        .life-progress-tooltip {
            position: absolute;
            right: 0;
            bottom: 10px;
            background: var(--text-color);
            color: #fff;
            padding: 4px 8px;
            font-size: 0.7rem;
            border-radius: 4px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .life-progress-container:hover .life-progress-tooltip {
            opacity: 1;
        }

        footer {
            margin-top: auto;
            padding: 2rem;
            text-align: center;
            width: 100%;
            background-color: rgba(255,255,255,0.5);
            border-top: 1px solid rgba(0,0,0,0.05);
            margin-bottom: 6px;
        }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 1rem;
        }

        .social-icons a {
            color: var(--accent-dim);
            font-size: 1.2rem;
            transition: color 0.3s, transform 0.3s;
        }

        .social-icons a:hover {
            color: var(--text-color);
            transform: translateY(-3px);
        }

        .footer-text {
            font-size: 0.8rem;
            color: var(--accent-dim);
        }

        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-color);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--accent-dim);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-color);
        }
    </style>
</head>
<body>

    <header class="fade-in">
        <h1>Memento Mori</h1>
        <div class="quote-container" id="quote">
            "N'agis pas comme si tu allais vivre dix mille ans. La mort plane sur toi."
        </div>

        <div class="stats" id="stats"></div>
        <div class="breadcrumb" id="breadcrumb"></div>

        <div class="controls">
            <div class="control-group">
                <label for="dob">Date de naissance</label>
                <input type="date" id="dob" value="1990-01-01">
            </div>
            <div class="control-group">
                <label for="expectancy">Espérance (années)</label>
                <input type="number" id="expectancy" value="80" min="1" max="120">
            </div>
        </div>
    </header>

    <div id="grid-container" class="view-life fade-in"></div>

    <footer>
        <div class="social-icons">
            <a href="github.com/fmatsos"><i class="fab fa-github"></i></a>
            <a href="linkedin.com/in/fmatsos"><i class="fab fa-linkedin"></i></a>
            <a href="akawaka.fr"><i class="fas fa-building"></i></a>
            <a href="franck.matsos.fr"><i class="fas fa-globe"></i></a>
        </div>
        <div class="footer-text">
            Memento Mori
            <br />
            Franck Matsos
        </div>
    </footer>

    <div class="life-progress-container">
        <div class="life-progress-bar" id="lifeProgressBar"></div>
        <div class="life-progress-tooltip" id="lifeProgressTooltip">0%</div>
    </div>

    <script>
        const dobInput = document.getElementById('dob');
        const expectancyInput = document.getElementById('expectancy');
        const gridContainer = document.getElementById('grid-container');
        const breadcrumbEl = document.getElementById('breadcrumb');
        const statsEl = document.getElementById('stats');
        const quoteEl = document.getElementById('quote');
        const progressBar = document.getElementById('lifeProgressBar');
        const progressTooltip = document.getElementById('lifeProgressTooltip');

        let currentView = 'LIFE';

        const quotes = [
            "N'agis pas comme si tu allais vivre dix mille ans. La mort plane sur toi.",
            "Tu pourrais quitter la vie à l'instant même : règle là-dessus ta conduite et tes pensées.",
            "Ce n'est pas que nous disposons de peu de temps, c'est que nous en perdons beaucoup.",
            "La vie est longue si on sait l'employer.",
            "Hâte-toi de bien vivre et songe que chaque jour est à lui seul une vie.",
            "Personne ne peut te voler ton passé, mais tu peux gâcher ton avenir.",
            "Pendant que l'on remet à plus tard, la vie passe."
        ];

        function getRandomQuote() {
            return quotes[Math.floor(Math.random() * quotes.length)];
        }

        async function fetchStoicQuote() {
            try {
                const response = await fetch('https://stoic-quotes.com/api/quote');
                if (!response.ok) throw new Error('API error');
                const data = await response.json();
                return `${data.text} — ${data.author}`;
            } catch (e) {
                return getRandomQuote();
            }
        }

        async function updateQuote() {
            quoteEl.style.opacity = 0;
            const quote = await fetchStoicQuote();
            setTimeout(() => {
                quoteEl.textContent = `"${quote}"`;
                quoteEl.style.opacity = 1;
            }, 500);
        }

        quoteEl.style.transition = "opacity 0.5s ease";

        function getLifeData() {
            const dob = new Date(dobInput.value);
            const expectancy = parseInt(expectancyInput.value);
            const now = new Date();
            const deathDate = new Date(dob);
            deathDate.setFullYear(deathDate.getFullYear() + expectancy);
            return { dob, expectancy, now, deathDate };
        }

        function updateBreadcrumb() {
            let html = '';
            if (currentView === 'LIFE') {
                html = '<span class="active">Vie (Années)</span>';
            } else if (currentView === 'MONTHS') {
                html = '<span onclick="transitionTo(\'LIFE\')">Vie (Années)</span> &nbsp;/&nbsp; <span class="active">Mois</span>';
            } else if (currentView === 'DAYS') {
                html = '<span onclick="transitionTo(\'LIFE\')">Vie (Années)</span> &nbsp;/&nbsp; <span onclick="transitionTo(\'MONTHS\')">Mois</span> &nbsp;/&nbsp; <span class="active">Jours</span>';
            }
            breadcrumbEl.innerHTML = html;
        }

        function updateProgressBar(passed, total) {
            const percentage = Math.min(100, Math.max(0, (passed / total) * 100));
            progressBar.style.width = `${percentage}%`;
            progressTooltip.textContent = `${percentage.toFixed(1)}% vécus`;
            progressTooltip.style.right = `${100 - percentage}%`;
            if (percentage > 90) {
                progressTooltip.style.right = '0';
                progressTooltip.style.transform = 'translateX(0)';
            } else {
                progressTooltip.style.transform = 'translateX(50%)';
            }
        }

        function renderView() {
            const { dob, expectancy, now, deathDate } = getLifeData();

            gridContainer.classList.remove('fade-in');
            void gridContainer.offsetWidth;
            gridContainer.classList.add('fade-in');

            gridContainer.innerHTML = '';
            gridContainer.className = `view-${currentView.toLowerCase()} fade-in`;

            let totalPoints, passedPoints;
            let unit = '';

            const oneDay = 24 * 60 * 60 * 1000;
            const totalLifeDays = Math.round(Math.abs((deathDate - dob) / oneDay));
            const passedLifeDays = Math.round(Math.abs((now - dob) / oneDay));
            updateProgressBar(passedLifeDays, totalLifeDays);

            if (currentView === 'LIFE') {
                totalPoints = expectancy;
                let age = now.getFullYear() - dob.getFullYear();
                if (now < new Date(now.getFullYear(), dob.getMonth(), dob.getDate())) {
                    age--;
                }
                passedPoints = age;
                unit = 'années';

                for (let i = 0; i < totalPoints; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    if (i < passedPoints) dot.classList.add('filled');
                    if (i === passedPoints) dot.classList.add('current');
                    dot.onclick = () => transitionTo('MONTHS');
                    dot.title = `Année ${i + 1}`;
                    gridContainer.appendChild(dot);
                }

            } else if (currentView === 'MONTHS') {
                totalPoints = expectancy * 12;
                let months = (now.getFullYear() - dob.getFullYear()) * 12;
                months -= dob.getMonth();
                months += now.getMonth();
                if (now.getDate() < dob.getDate()) {
                    months--;
                }
                passedPoints = months;
                unit = 'mois';

                for (let i = 0; i < totalPoints; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    if (i < passedPoints) dot.classList.add('filled');
                    if (i === passedPoints) dot.classList.add('current');
                    dot.onclick = () => transitionTo('DAYS');
                    dot.title = `Mois ${i + 1}`;
                    gridContainer.appendChild(dot);
                }

            } else if (currentView === 'DAYS') {
                totalPoints = totalLifeDays;
                passedPoints = passedLifeDays;
                unit = 'jours';

                const fragment = document.createDocumentFragment();
                for (let i = 0; i < totalPoints; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    if (i < passedPoints) dot.classList.add('filled');
                    if (i === passedPoints) dot.classList.add('current');
                    dot.title = `Jour ${i + 1}`;
                    fragment.appendChild(dot);
                }
                gridContainer.appendChild(fragment);
            }

            statsEl.textContent = `${passedPoints.toLocaleString()} ${unit} vécus`;
            updateBreadcrumb();
        }

        function transitionTo(view) {
            currentView = view;
            updateQuote();
            renderView();
        }

        dobInput.addEventListener('change', renderView);
        expectancyInput.addEventListener('change', renderView);

        renderView();
        updateQuote();

        window.transitionTo = transitionTo;
    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"f0f03d0605bf45f1a3b17cf7d5e6861f","server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>